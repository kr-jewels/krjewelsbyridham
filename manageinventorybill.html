<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="robots" content="noindex, nofollow">
  <title>Submit Bill - KR Shelf</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet" />
  <script src="manageinventoryscript.js" defer></script>
</head>
<body class="bg-gray-900 text-white min-h-screen font-sans">
  <div class="container mx-auto p-4">
    <h1 class="text-3xl font-bold text-center mb-6">Submit Bill</h1>

    <form id="billForm" method="POST" action="https://script.google.com/macros/s/AKfycbykh-8vOv1McWwRTkaJX8jPHUyB346epVNXSmtGSh8zHvAfkM5RKO5OpuC6I_grTZ5b/exec" class="max-w-xl mx-auto bg-gray-800 p-6 rounded shadow-lg">
      <label class="block mb-2">Customer Name</label>
      <input name="Customer Name" required class="w-full p-2 mb-4 rounded bg-gray-700 text-white" />

      <label class="block mb-2">Customer Contact</label>
      <input name="Customer Contact" class="w-full p-2 mb-4 rounded bg-gray-700 text-white" />

      <div id="itemsContainer">
        <!-- JS will insert item rows here -->
      </div>

      <button type="submit" class="w-full bg-green-600 hover:bg-green-700 py-2 rounded mt-4">Submit Bill</button>
    </form>
  </div>

  <script>
    const cart = getCart(); // from manageinventoryscript.js
    const itemsContainer = document.getElementById("itemsContainer");

    cart.forEach((item, index) => {
      const wrapper = document.createElement("div");
      wrapper.className = "bg-gray-700 p-3 mb-3 rounded";

      wrapper.innerHTML = `
        <label>Product Code</label>
        <input name="Product Code" value="${item.productCode}" class="w-full p-2 mb-2 rounded bg-gray-800 text-white" />

        <label>Selling Price</label>
        <input name="Selling Price" value="${item.sellingPrice}" class="w-full p-2 mb-2 rounded bg-gray-800 text-white" />

        <label>Status</label>
        <select name="Status" class="w-full p-2 mb-2 rounded bg-gray-800 text-white">
          <option value="Sold" ${item.status === "Sold" ? "selected" : ""}>Sold</option>
          <option value="Returned" ${item.status === "Returned" ? "selected" : ""}>Returned</option>
        </select>
      `;

      itemsContainer.appendChild(wrapper);
    });
  </script>
</body>
</html>
